{"componentChunkName":"component---src-templates-docs-js","path":"/containers-in-practice/2-building-an-image","result":{"data":{"site":{"siteMetadata":{"title":"Docker Workshop | Tommy May III","docsLocation":""}},"mdx":{"fields":{"id":"bcdcbd39-d124-5ff3-af45-449d59899aeb","title":"Building an Image","slug":"/containers-in-practice/2-building-an-image"},"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Building an Image\",\n  \"metaTitle\": \"Building an Image\",\n  \"metaDescription\": \"Learn how to build your own docker image\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h1\", null, \"Goals\"), mdx(\"p\", null, \"We are going to walk through building an image from a basic Dockerfile and extending that Dockerfile more and more\\nto achieve the results we want. On this page we will:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Extend another docker image\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Modify the configuration of the base docker image\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Learn how to publish our docker image to a registry.\")), mdx(\"h1\", null, \"Extend Another Docker Image\"), mdx(\"p\", null, \"Let's say we want to serve our own HTML instead of the Nginx welcome page. After all if the only thing we could do with\\ncontainers is serve welcome pages then they would not be all that useful.\"), mdx(\"h2\", null, \"1. Create a Test Directory\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"mkdir -p ~/my-docker-site/html && cd ~/my-docker-site\\n\")), mdx(\"h2\", null, \"2. Add Our Own HTML\"), mdx(\"p\", null, \"Copy this HTML to a file at \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/my-docker-site/html/index.html\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-html\"\n  }), \"<!DOCTYPE html>\\n<html>\\n<head>\\n<title>Docker Workshop</title>\\n</head>\\n<body>\\n\\n<h1>Docker Workshop</h1>\\n<p>Welcome everyone.</p>\\n\\n</body>\\n</html>\\n\")), mdx(\"h2\", null, \"3. Create a Dockerfile\"), mdx(\"p\", null, \"Place this file as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/my-docker-site/Dockerfile\")), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-dockerfile\"\n  }), \"FROM nginx:1.18.0\\nCOPY html /usr/share/nginx/html\\n\")), mdx(\"h2\", null, \"4. Build the Docker Image\"), mdx(\"p\", null, \"From the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/my-docker-site\"), \" directory\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"docker build .\\n\")), mdx(\"p\", null, \"If you notice when we now run the command to list available images we will have a nameless/tagless image\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"docker images\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"812px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/8a29f703395b12c085313a2620e65292/4e65e/nameless-tagless-images.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"7.8817733990147785%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsSAAALEgHS3X78AAAAbUlEQVQI102Oyw6DMAwEbefFBUoSpWp7QRygEun//942sQrqYWXPWFqZeBgxx4yYMkq5w/sAIgazQMToPLnHGKueiNT33Tn/Y3UGtoke18pY5DqGMGBZ1r8Cwra/UesHORfl1B45Gj+eL0zTDV9NWywAJkIM4gAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"docker images command output\",\n    \"title\": \"docker images command output\",\n    \"src\": \"/static/8a29f703395b12c085313a2620e65292/4e65e/nameless-tagless-images.png\",\n    \"srcSet\": [\"/static/8a29f703395b12c085313a2620e65292/8472d/nameless-tagless-images.png 259w\", \"/static/8a29f703395b12c085313a2620e65292/9eb08/nameless-tagless-images.png 518w\", \"/static/8a29f703395b12c085313a2620e65292/4e65e/nameless-tagless-images.png 812w\"],\n    \"sizes\": \"(max-width: 812px) 100vw, 812px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"This is not ideal to have a namelss/tagless image, as referencing images by their ID makes for less readable commands.\\nLet us try to rebuild the docker image but this time provide a name and tag.\"), mdx(\"p\", null, \"From the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/my-docker-site\"), \" directory\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"docker build -t my-docker-site:v0.0.1 .\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1035px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/e412ac2845b2fb52ab4a687758d7fd8d/805b2/named-tagged-images.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"6.165703275529865%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAARUlEQVQI1x2KQQrAQAgDhXVNa0G3LIWe+v9fpuIhZMhE7vcj8iHOi2stAgdFpBqdOY0Rwb13c2ZSddIMdPf+jqHUcqP2H26NFf3/Ta4+AAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"docker images command output\",\n    \"title\": \"docker images command output\",\n    \"src\": \"/static/e412ac2845b2fb52ab4a687758d7fd8d/bcbcb/named-tagged-images.png\",\n    \"srcSet\": [\"/static/e412ac2845b2fb52ab4a687758d7fd8d/8472d/named-tagged-images.png 259w\", \"/static/e412ac2845b2fb52ab4a687758d7fd8d/9eb08/named-tagged-images.png 518w\", \"/static/e412ac2845b2fb52ab4a687758d7fd8d/bcbcb/named-tagged-images.png 1035w\", \"/static/e412ac2845b2fb52ab4a687758d7fd8d/805b2/named-tagged-images.png 1038w\"],\n    \"sizes\": \"(max-width: 1035px) 100vw, 1035px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"h2\", null, \"5. Create Container From Our Custom Image\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"docker run -dit --name my-docker-site -p 8080:80 my-docker-site:v0.0.1\\n\")), mdx(\"h2\", null, \"6. Verify HTML in Browser\"), mdx(\"p\", null, \"Visit \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8080\"\n  }), \"localhost:8080\"), \" to see our HTML instead of the default Nginx welcome page.\\n\", mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1035px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"34.899328859060404%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAAAc0lEQVQoz62PQQcAIRCF+/8/rWMdOkRUh+hWdIl6ayKyy9qyj2c8Zj5vmHMO3nvEGGGMAWVrLUII6L2DNOcXMSklOOfQWkMpBcpCiOHW2j4w54xSClJKqLU+FnZgA3g/plbTRy/T8uoJWPNWwzfgiRh+1gU0bCc+FSwKBgAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"browser output of our custom HTML\",\n    \"title\": \"browser output of our custom HTML\",\n    \"src\": \"/static/610253966458d13b825e9a3b50763b61/bcbcb/custom-nginx-html.png\",\n    \"srcSet\": [\"/static/610253966458d13b825e9a3b50763b61/8472d/custom-nginx-html.png 259w\", \"/static/610253966458d13b825e9a3b50763b61/9eb08/custom-nginx-html.png 518w\", \"/static/610253966458d13b825e9a3b50763b61/bcbcb/custom-nginx-html.png 1035w\", \"/static/610253966458d13b825e9a3b50763b61/64b56/custom-nginx-html.png 1490w\"],\n    \"sizes\": \"(max-width: 1035px) 100vw, 1035px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"h1\", null, \"Modify the configuration of the base docker image\"), mdx(\"p\", null, \"Now we have our own Docker image what if we wanted to take our Nginx server a bit further and add some custom redirects\\nto it. For the sake of this example let's say we want to redirect \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/homepage\"), \" to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \" because we moved where our homepages lives.\"), mdx(\"p\", null, \"Picking up where we left off, if you visit \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8080/homepage\"\n  }), \"localhost:8080/homepage\"), \" then you will see the\\nstandard Nginx \\\"not found\\\" page.\\n\", mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"1035px\"\n    }\n  }), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"14.413407821229052%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAABYlAAAWJQFJUiTwAAAANUlEQVQI12P4+/fvf3z45cuX/+/du/f/7du3///9+4dXLUieAUTgwyCATBPCDP8JAHTDCQEAZlntl9tvMdEAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Nginx not found page\",\n    \"title\": \"Nginx not found page\",\n    \"src\": \"/static/7d0d79e6d6d3d28d005d36600f66641d/bcbcb/nginx-not-found.png\",\n    \"srcSet\": [\"/static/7d0d79e6d6d3d28d005d36600f66641d/8472d/nginx-not-found.png 259w\", \"/static/7d0d79e6d6d3d28d005d36600f66641d/9eb08/nginx-not-found.png 518w\", \"/static/7d0d79e6d6d3d28d005d36600f66641d/bcbcb/nginx-not-found.png 1035w\", \"/static/7d0d79e6d6d3d28d005d36600f66641d/cb7c7/nginx-not-found.png 1553w\", \"/static/7d0d79e6d6d3d28d005d36600f66641d/09b9a/nginx-not-found.png 2070w\", \"/static/7d0d79e6d6d3d28d005d36600f66641d/ca453/nginx-not-found.png 3580w\"],\n    \"sizes\": \"(max-width: 1035px) 100vw, 1035px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n    \")), mdx(\"p\", null, \"Let's get this route to redirect to \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/\"), \" where we have placed our custom HTML page. This process will take a little\\nNginx knowledge, but let's walk through the steps together.\"), mdx(\"h2\", null, \"1. Find the Nginx Config\"), mdx(\"p\", null, \"With our \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"my-docker-site\"), \" container running let's get inside of the container, so we can poke around the existing configuration.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"docker exec -it my-docker-site bash\\n\")), mdx(\"p\", null, \"The above command should open up the prompt to use the container as our shell.\"), mdx(\"p\", null, \"Let's navigate to the standard spot we would normally find Nginx configuration\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"cd /etc/nginx && ls\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"809px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/2bb81eb0efd490971311a1097ac39afb/eca87/nginx-config-dir.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"5.067985166872683%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAABCAYAAADeko4lAAAACXBIWXMAAAsSAAALEgHS3X78AAAASUlEQVQI1x3GRw6AIAAAQbzSDWK50DRo4v/ftxJPM6KenXbd9OcllUbKlW0/SCmPF2Jccc5jrfuVUg0d3s8YYwlhQWuDUgohJj4IlRjoIDroagAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Nginx configuration directory\",\n    \"title\": \"Nginx configuration directory\",\n    \"src\": \"/static/2bb81eb0efd490971311a1097ac39afb/eca87/nginx-config-dir.png\",\n    \"srcSet\": [\"/static/2bb81eb0efd490971311a1097ac39afb/8472d/nginx-config-dir.png 259w\", \"/static/2bb81eb0efd490971311a1097ac39afb/9eb08/nginx-config-dir.png 518w\", \"/static/2bb81eb0efd490971311a1097ac39afb/eca87/nginx-config-dir.png 809w\"],\n    \"sizes\": \"(max-width: 809px) 100vw, 809px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \"), \"\\nYou can see from the above output we have the standard \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"nginx.conf\"), \" file so let us see what is inside of it\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"cat nginx.conf\\n\")), mdx(\"p\", null, mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"600px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/fe51a353133d7c6126e69b3ff16f4259/3f01f/nginx-conf.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"94.66666666666667%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsSAAALEgHS3X78AAACf0lEQVQ4y4VU2ZLiMAy0nfu+A4SBcBQzb/z/32nVchxCDVP7oHLsxK1WqxXVdj2dzjONuwMdpiP1w0C73Z5jR03T0jCMEkmaklJ6CSWrMUaetXbP/G5/mKjrBwELgmD96FPg4v9CTccv2u0PJMDMNmUmvu8LOCIMI9k7Vi+GanO22aPULC8pLyqamOXj8aD7/U7zPFNd15KkKAoBdeyN8SiOkzWR5/lUlqWcqSTNbTnGpyiOKcsyiSRJbAlLZoC99lpAtXYaGqnG8zxSPQs+TV8URinFDBIzaBiGArgVH5cswHtjXNhkHGGUUN10VFaNdLVpGikR5a4fvYUtOYoiKdUBg50kDMLkz666AOuu62S1+4SrmijPnVyGkyzW6Yc9td3A5dqXKBUCI6AlLgVBuGhkGfl+sJ47QDAEc6VNQJfrnc195TJbOh6P0uXL9SqdnucLHdhS2wb9DtskATQM2Pc79uFRLAINB56W8/ks4HXd8PMslsIE7dmzeMZZ23aSrChKkWPpOsREKd4qOgDBEqBuvd1uwvh6vdH39w89n0+WpVoa4ssdcQYYFkXNLxuekpyqqpAGgB3mGQzAchxH0Q2Tk2W5uGDVkJklSSraKrBDyW078AcRVZwVH2MEkTGKYolNSR9Gb6Ov50V0Ol2kKbADTO3ssL2EshwgntM02yTQL+MbE3JZJxYbP4mJhhE26oWt0tAX3fPJ5z1WpexFn220To42dhThQ+OFDDBSmpUyfpoT4Ewp1yheNbRZ9uv4qV8TJAGG43jgRrDo3JwsZ/3yihNUssZJRtYJ3juA/vQr44h4QvKqpbLuqWp6YVuxwQtuDvyV5YW9vAmt/wb8B+pcoTjHSXvOAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Nginx config file\",\n    \"title\": \"Nginx config file\",\n    \"src\": \"/static/fe51a353133d7c6126e69b3ff16f4259/3f01f/nginx-conf.png\",\n    \"srcSet\": [\"/static/fe51a353133d7c6126e69b3ff16f4259/8472d/nginx-conf.png 259w\", \"/static/fe51a353133d7c6126e69b3ff16f4259/9eb08/nginx-conf.png 518w\", \"/static/fe51a353133d7c6126e69b3ff16f4259/3f01f/nginx-conf.png 600w\"],\n    \"sizes\": \"(max-width: 600px) 100vw, 600px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"h2\", null, \"2. Modify the Config to Include our Redirect\"), mdx(\"p\", null, \"We can see from the output of \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cat nginx.conf\"), \" above, that our out of the box Nginx configuration is including all \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"*.conf\"), \"\\nfiles from the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/nginx/conf.d/\"), \" directory. We know that from this line\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"include /etc/nginx/conf.d/*.conf\\n\")), mdx(\"p\", null, \"If we take a look in this directory we can see there is currently 1 file \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"default.conf\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"585px\"\n    }\n  }), \"\\n      \", mdx(\"a\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/4fce7cf45460aaffe7f109bc338f91eb/4c1ab/nginx-default-conf.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": [\"noopener\"]\n  }), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"133.67521367521366%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAAsSAAALEgHS3X78AAADYUlEQVRIx5VV6XriMAyMQ25IQu6Dq3ShtMv7P592Rk4o0K/b3R+q7NoZS5qRcJq2l2Hcih9E4jiOpGkqxrgwI65r9H/cLxYLNccxPxj+vBx/yWa7l6Io5e3tTUF9P1BQntMTzHXd294+6n4FNK4vbTtI14/StJ1UVSVN00gU2Yi/t4eo8KCnQTjuIpDt9oC0d9L3g4KtVivJ81zW6zWizbBPH9aMLMsy/K9A1AsF5P2u6/iAJ6xjVXeSZrlGRkB+vFwusY/hVwrEfZIsFZDRBEF4i9B+l3K9wGuFXN6vUpSV7HY7RLyVcRx13ff9RMxnel9TvjsziJCgabqWOF5KWZZaRxpTYGoziJJgngAmz9Q9z2cNfeRfIpVUkmUK0OSh+GEYav2Y6n2EVkreQ8plWdgIq6pBNKOU8E1TTbWLFCzP11BBB0kVWjNaHMf68KdsHPw/sDVcgOU8LzTlBMXPQEY6scr68RIJIjBZrapa9Vqi3pbhp9oS8PX1JO8gpYcWPz4+5Hq9ymazkbqutaYEJoCNyHms6bMOjfGRYi7DsIPPwOxe9vuDptk0rQLZlEL7wUSElU1we4T7CKVQYftBLAsvFM+P1NOCMFELo6We88zjHS9QNj3Pu4naMj+njEsjuqSGsIuykbrpYYPkRS1r7FuQtca67QbcabG2sqprdFSaPUhHvefH0g1bbT0CdP1GWhgji5MV2E7EVXn8rafv9gE+zMtaVuiWGi3IV5VttKG2HCaP5/s/DIq7znExlpgC5cEG5+hid+iAgHQoEUqIxnMOjxznhZ4V2k38/taenHNt2yoIBwE1N08RH5GRPXoyqqKG4COsQxg99/59BrzYdb2cz2cFtr1cqw55xq6h/znlO8A4SaDDQS6XixwOLyro0+kMO0GT++lnwUyRhioZGsVMM8Z8psyDBIDsht/oknEYpUKUjPh4PKpn3QjKDJjN3EF2urc3cSsga5Sh2HydRMyh6zCFkRgOie/l4j7PQ6OvzS+uMQRKMFtjTaIIzOnC6Mg0783rOI6myJxPz18y1o8p82IP23APT3n4HgYnlMBaszyMlmZrOA2LCVA9D8joDsWvUBvWL2GT/yOr9ifVmvY0X5sHKmsWThIxkzn/ayTDmMd+NE/2GNFsiMo1d96e/wGxLlN87p1cnwAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  })), \"\\n  \", mdx(\"img\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Nginx default.conf file\",\n    \"title\": \"Nginx default.conf file\",\n    \"src\": \"/static/4fce7cf45460aaffe7f109bc338f91eb/4c1ab/nginx-default-conf.png\",\n    \"srcSet\": [\"/static/4fce7cf45460aaffe7f109bc338f91eb/8472d/nginx-default-conf.png 259w\", \"/static/4fce7cf45460aaffe7f109bc338f91eb/9eb08/nginx-default-conf.png 518w\", \"/static/4fce7cf45460aaffe7f109bc338f91eb/4c1ab/nginx-default-conf.png 585w\"],\n    \"sizes\": \"(max-width: 585px) 100vw, 585px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  })), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"We can see from the above output that the default.conf file is listening to port 80 on localhost. This seems like a good\\nplace to include our redirect. First lets copy the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"/etc/nginx/conf.d/default.conf\"), \" file to our local\\n\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/my-docker-site/docker-config/default.conf\"), \" file. We can then modify the file to have the redirect that we want.\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"server {\\n    listen       80;\\n    listen  [::]:80;\\n    server_name  localhost;\\n\\n    #charset koi8-r;\\n    #access_log  /var/log/nginx/host.access.log  main;\\n\\n    location / {\\n        rewrite ^/homepage$ http://localhost:8080 permanent;\\n        root   /usr/share/nginx/html;\\n        index  index.html index.htm;\\n    }\\n\\n    #error_page  404              /404.html;\\n\\n    # redirect server error pages to the static page /50x.html\\n    #\\n    error_page   500 502 503 504  /50x.html;\\n    location = /50x.html {\\n        root   /usr/share/nginx/html;\\n    }\\n\\n    # proxy the PHP scripts to Apache listening on 127.0.0.1:80\\n    #\\n    #location ~ \\\\.php$ {\\n    #    proxy_pass   http://127.0.0.1;\\n    #}\\n\\n    # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\\n    #\\n    #location ~ \\\\.php$ {\\n    #    root           html;\\n    #    fastcgi_pass   127.0.0.1:9000;\\n    #    fastcgi_index  index.php;\\n    #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\\n    #    include        fastcgi_params;\\n    #}\\n\\n    # deny access to .htaccess files, if Apache's document root\\n    # concurs with nginx's one\\n    #\\n    #location ~ /\\\\.ht {\\n    #    deny  all;\\n    #}\\n}\\n\")), mdx(\"h2\", null, \"3. Use Our default.conf File Instead of the Out Of The Box One\"), mdx(\"p\", null, \"Edit your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Dockerfile\"), \" again\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-dockerfile\"\n  }), \"FROM nginx:1.18.0\\nCOPY html /usr/share/nginx/html\\nCOPY docker-config /etc/nginx/conf.d/\\n\")), mdx(\"h2\", null, \"4. Build New Docker Image\"), mdx(\"p\", null, \"From the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"~/my-docker-site\"), \" directory\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"docker build -t my-docker-site:v0.0.2 .\\n\")), mdx(\"h2\", null, \"5. Create Container Based on New Image\"), mdx(\"pre\", null, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"docker run -dit --name my-docker-site-2 -p 8090:80 my-docker-site:v0.0.2\\n\")), mdx(\"p\", null, \"We can now verify we have 2 Nginx containers running, one without our redirect at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8080\"\n  }), \"localhost:8080\"), \"\\nand another with our redirect at \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"http://localhost:8090\"\n  }), \"localhost:8090\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","tableOfContents":{"items":[{"url":"#goals","title":"Goals"},{"url":"#extend-another-docker-image","title":"Extend Another Docker Image","items":[{"url":"#1-create-a-test-directory","title":"1. Create a Test Directory"},{"url":"#2-add-our-own-html","title":"2. Add Our Own HTML"},{"url":"#3-create-a-dockerfile","title":"3. Create a Dockerfile"},{"url":"#4-build-the-docker-image","title":"4. Build the Docker Image"},{"url":"#5-create-container-from-our-custom-image","title":"5. Create Container From Our Custom Image"},{"url":"#6-verify-html-in-browser","title":"6. Verify HTML in Browser"}]},{"url":"#modify-the-configuration-of-the-base-docker-image","title":"Modify the configuration of the base docker image","items":[{"url":"#1-find-the-nginx-config","title":"1. Find the Nginx Config"},{"url":"#2-modify-the-config-to-include-our-redirect","title":"2. Modify the Config to Include our Redirect"},{"url":"#3-use-our-defaultconf-file-instead-of-the-out-of-the-box-one","title":"3. Use Our default.conf File Instead of the Out Of The Box One"},{"url":"#4-build-new-docker-image","title":"4. Build New Docker Image"},{"url":"#5-create-container-based-on-new-image","title":"5. Create Container Based on New Image"}]}]},"parent":{"relativePath":"containers-in-practice/2-building-an-image.md"},"frontmatter":{"metaTitle":"Building an Image","metaDescription":"Learn how to build your own docker image"}},"allMdx":{"edges":[{"node":{"fields":{"slug":"/containers-in-practice","title":"Containers in Practice"}}},{"node":{"fields":{"slug":"/quick-examples","title":"Quick Examples"}}},{"node":{"fields":{"slug":"/","title":"Docker Workshop"}}},{"node":{"fields":{"slug":"/why-containers","title":"Why Use Containers"}}},{"node":{"fields":{"slug":"/introduction","title":"Introduction"}}},{"node":{"fields":{"slug":"/containers-in-practice/1-managing-docker-containers","title":"Managing Docker Containers"}}},{"node":{"fields":{"slug":"/containers-in-practice/2-building-an-image","title":"Building an Image"}}},{"node":{"fields":{"slug":"/containers-in-practice/3-docker-compose","title":"Docker Compose"}}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"bcdcbd39-d124-5ff3-af45-449d59899aeb"}}}